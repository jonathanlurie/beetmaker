{"version":3,"file":"beetmaker.js","sources":["../src/Track.js","../src/TrackCollection.js","../src/index.js"],"sourcesContent":["class Track {\n\n  constructor(name, decodedBuffer, audioContext){\n    this._name = name\n    this._decodedBuffer = decodedBuffer\n    this._audioContext = audioContext\n  }\n\n  // act as a factory; because sources can only be played once\n  createSource(connectToDestination = true){\n    let source = this._audioContext.createBufferSource()\n    source.buffer = this._decodedBuffer\n\n    // connect the AudioBufferSourceNode to the\n    // destination so we can hear the sound\n    if(connectToDestination){\n      source.connect(this._audioContext.destination)\n    }\n    return source\n  }\n\n\n  getDuration(){\n    return this._decodedBuffer.duration\n  }\n\n\n  getNumberOfChannels(){\n    return this._decodedBuffer.numberOfChannels()\n  }\n\n\n  getSampleRate(){\n    return this._decodedBuffer.sampleRate\n  }\n\n\n  play(){\n    let source = this.createSource(true)\n    source.start(0, /*offsetSecond, durationSecond*/)\n  }\n\n}\n\nexport default Track\n","import Track from './Track'\n\nclass TrackCollection {\n\n  constructor(audioContext=null){\n    if(!audioContext){\n      this._audioContext = new AudioContext()\n    } else {\n      this._audioContext = audioContext\n    }\n\n    this._collection = {}\n  }\n\n\n  addFromFile(file, name=null){\n    let effectiveName = name ? name : file.name\n    let that = this\n    let fileReader = new FileReader()\n\n    fileReader.onload = function(e){\n      that._audioContext.decodeAudioData(e.target.result,\n\n        // success callback\n        function(decodedAudioBuffer) {\n          that._addTrack(decodedAudioBuffer, effectiveName, that._audioContext)\n        },\n\n        // error callback\n        function(e){\n          console.log(\"Error with decoding audio data\" + e.err)\n        })\n    }\n    fileReader.readAsArrayBuffer(file)\n  }\n\n\n  _addTrack(decodedAudioBuffer, name, audioContext){\n    if(name in this._collection){\n      throw new Error(`A track named ${name} already exists.`)\n    }\n\n    this._collection[name] = new Track(name, decodedAudioBuffer, audioContext)\n  }\n\n}\n\nexport default TrackCollection\n","import TrackCollection from './TrackCollection'\n\nexport default ({\n  TrackCollection,\n})\n"],"names":[],"mappings":";;;;;;EAAA,MAAM,KAAK,CAAC;;EAEZ,EAAE,WAAW,CAAC,IAAI,EAAE,aAAa,EAAE,YAAY,CAAC;EAChD,IAAI,IAAI,CAAC,KAAK,GAAG,KAAI;EACrB,IAAI,IAAI,CAAC,cAAc,GAAG,cAAa;EACvC,IAAI,IAAI,CAAC,aAAa,GAAG,aAAY;EACrC,GAAG;;EAEH;EACA,EAAE,YAAY,CAAC,oBAAoB,GAAG,IAAI,CAAC;EAC3C,IAAI,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,kBAAkB,GAAE;EACxD,IAAI,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,eAAc;;EAEvC;EACA;EACA,IAAI,GAAG,oBAAoB,CAAC;EAC5B,MAAM,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,EAAC;EACpD,KAAK;EACL,IAAI,OAAO,MAAM;EACjB,GAAG;;;EAGH,EAAE,WAAW,EAAE;EACf,IAAI,OAAO,IAAI,CAAC,cAAc,CAAC,QAAQ;EACvC,GAAG;;;EAGH,EAAE,mBAAmB,EAAE;EACvB,IAAI,OAAO,IAAI,CAAC,cAAc,CAAC,gBAAgB,EAAE;EACjD,GAAG;;;EAGH,EAAE,aAAa,EAAE;EACjB,IAAI,OAAO,IAAI,CAAC,cAAc,CAAC,UAAU;EACzC,GAAG;;;EAGH,EAAE,IAAI,EAAE;EACR,IAAI,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,EAAC;EACxC,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,oCAAmC;EACrD,GAAG;;EAEH,CAAC;;ECxCD,MAAM,eAAe,CAAC;;EAEtB,EAAE,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC;EAChC,IAAI,GAAG,CAAC,YAAY,CAAC;EACrB,MAAM,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,GAAE;EAC7C,KAAK,MAAM;EACX,MAAM,IAAI,CAAC,aAAa,GAAG,aAAY;EACvC,KAAK;;EAEL,IAAI,IAAI,CAAC,WAAW,GAAG,GAAE;EACzB,GAAG;;;EAGH,EAAE,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC;EAC9B,IAAI,IAAI,aAAa,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,KAAI;EAC/C,IAAI,IAAI,IAAI,GAAG,KAAI;EACnB,IAAI,IAAI,UAAU,GAAG,IAAI,UAAU,GAAE;;EAErC,IAAI,UAAU,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;EACnC,MAAM,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM;;EAExD;EACA,QAAQ,SAAS,kBAAkB,EAAE;EACrC,UAAU,IAAI,CAAC,SAAS,CAAC,kBAAkB,EAAE,aAAa,EAAE,IAAI,CAAC,aAAa,EAAC;EAC/E,SAAS;;EAET;EACA,QAAQ,SAAS,CAAC,CAAC;EACnB,UAAU,OAAO,CAAC,GAAG,CAAC,gCAAgC,GAAG,CAAC,CAAC,GAAG,EAAC;EAC/D,SAAS,EAAC;EACV,MAAK;EACL,IAAI,UAAU,CAAC,iBAAiB,CAAC,IAAI,EAAC;EACtC,GAAG;;;EAGH,EAAE,SAAS,CAAC,kBAAkB,EAAE,IAAI,EAAE,YAAY,CAAC;EACnD,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC;EAChC,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,cAAc,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;EAC9D,KAAK;;EAEL,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,kBAAkB,EAAE,YAAY,EAAC;EAC9E,GAAG;;EAEH,CAAC;;AC3CD,cAAe,CAAC;EAChB,EAAE,eAAe;EACjB,CAAC,CAAC;;;;;;;;"}